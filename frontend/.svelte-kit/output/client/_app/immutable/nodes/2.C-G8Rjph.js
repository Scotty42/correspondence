import{f as n,a as i,c as ya,t as V}from"../chunks/Dp-lm7Ug.js";import{o as ka}from"../chunks/BvysEO2T.js";import{A as Aa,B as L,C as La,D as Na,F as N,e as Sa,$ as Ba,G as l,I as e,J as t,K as a,L as W,M as S,N as z}from"../chunks/1DOnEbbI.js";import{s as c}from"../chunks/DmiR870a.js";import{i as y}from"../chunks/CAGLYOiq.js";import{h as Ka,d as wa,c as za,a as Ca,e as Ea,s as Fa,i as Ia}from"../chunks/BhBHE4xL.js";import{s as X}from"../chunks/CJvCuKPs.js";var Ma=n('<div class="text-center mt-3"><span class="loading"></span></div>'),Ra=n('<div class="alert alert-error"> </div>'),Ta=n('<p class="text-muted">Noch keine Dokumente erstellt.</p>'),ja=n('<span class="badge badge-success">Archiviert</span>'),Ga=n('<span class="badge badge-secondary"> </span>'),Ja=n('<tr><td><a target="_blank"> </a></td><td><span class="badge badge-primary"> </span></td><td> </td><td> </td><td><!></td></tr>'),Oa=n('<table class="table"><thead><tr><th>Nummer</th><th>Typ</th><th>Betreff</th><th>Datum</th><th>Status</th></tr></thead><tbody></tbody></table>'),Pa=n('<div class="card mt-3"><h2 class="mb-2 svelte-1uha8ag">Service Status</h2> <div class="services-grid svelte-1uha8ag"><div class="service-item svelte-1uha8ag"><span></span> <div><strong>Ollama (KI)</strong> <div class="text-muted"> </div></div></div> <div class="service-item svelte-1uha8ag"><span></span> <div><strong>paperless-ngx</strong> <div class="text-muted">Archivierung</div></div></div></div></div>'),qa=n('<div class="grid grid-3 mt-3"><a href="/documents/letter" class="action-card svelte-1uha8ag"><span class="action-icon svelte-1uha8ag">‚úâÔ∏è</span> <span class="action-label svelte-1uha8ag">Neuer Brief</span></a> <a href="/documents/invoice" class="action-card svelte-1uha8ag"><span class="action-icon svelte-1uha8ag">üßæ</span> <span class="action-label svelte-1uha8ag">Neue Rechnung</span></a> <a href="/documents/offer" class="action-card svelte-1uha8ag"><span class="action-icon svelte-1uha8ag">üìã</span> <span class="action-label svelte-1uha8ag">Neues Angebot</span></a></div> <div class="grid grid-3 mt-3"><div class="card stat-card svelte-1uha8ag"><div class="stat-value svelte-1uha8ag"> </div> <div class="stat-label svelte-1uha8ag">Dokumente</div></div> <div class="card stat-card svelte-1uha8ag"><div class="stat-value svelte-1uha8ag"> </div> <div class="stat-label svelte-1uha8ag">Kontakte</div></div> <div class="card stat-card svelte-1uha8ag"><div class="stat-value svelte-1uha8ag"><!></div> <div class="stat-label svelte-1uha8ag">Services</div></div></div> <div class="card mt-3"><div class="flex-between mb-2"><h2 class="svelte-1uha8ag">Letzte Dokumente</h2> <a href="/documents" class="btn btn-secondary btn-sm">Alle anzeigen</a></div> <!></div> <!>',1),Ha=n('<div class="dashboard"><h1 class="svelte-1uha8ag">Dashboard</h1> <!></div>');function $a(Y,Z){Aa(Z,!0);let B=L(La([])),J=L(0),h=L(null),O=L(!0),C=L("");ka(async()=>{try{const[s,g,F]=await Promise.all([wa.list(),za.list(),Ca.services()]);N(B,s.slice(0,5),!0),N(J,g.length,!0),N(h,F,!0)}catch(s){N(C,s instanceof Error?s.message:"Fehler beim Laden",!0)}finally{N(O,!1)}});function $(s){return new Date(s).toLocaleDateString("de-DE")}function aa(s){return{letter:"Brief",invoice:"Rechnung",offer:"Angebot"}[s]||s}var E=Ha();Ka("1uha8ag",s=>{Sa(()=>{Ba.title="Dashboard - Korrespondenz"})});var ea=l(e(E),2);{var ta=s=>{var g=Ma();i(s,g)},sa=s=>{var g=ya(),F=W(g);{var ra=p=>{var m=Ra(),k=e(m,!0);a(m),S(()=>c(k,t(C))),i(p,m)},va=p=>{var m=qa(),k=l(W(m),2),I=e(k),P=e(I),la=e(P,!0);a(P),z(2),a(I);var M=l(I,2),q=e(M),ia=e(q,!0);a(q),z(2),a(M);var H=l(M,2),Q=e(H),da=e(Q);{var na=r=>{var v=V("‚úÖ");i(r,v)},ca=r=>{var v=V("‚ö†Ô∏è");i(r,v)};y(da,r=>{var v,o;(v=t(h))!=null&&v.ollama.available&&((o=t(h))!=null&&o.paperless.available)?r(na):r(ca,!1)})}a(Q),z(2),a(H),a(k);var R=l(k,2),oa=l(e(R),2);{var ua=r=>{var v=Ta();i(r,v)},ha=r=>{var v=Oa(),o=l(e(v));Ea(o,21,()=>t(B),Ia,(A,d)=>{var f=Ja(),b=e(f),x=e(b),T=e(x,!0);a(x),a(b);var D=l(b),K=e(D),w=e(K,!0);a(K),a(D);var j=l(D),pa=e(j,!0);a(j);var G=l(j),ma=e(G,!0);a(G);var U=l(G),fa=e(U);{var ba=u=>{var _=ja();i(u,_)},xa=u=>{var _=Ga(),Da=e(_,!0);a(_),S(()=>c(Da,t(d).status)),i(u,_)};y(fa,u=>{t(d).status==="archived"?u(ba):u(xa,!1)})}a(U),a(f),S((u,_)=>{Fa(x,"href",`/api/documents/${t(d).id??""}/pdf`),c(T,t(d).doc_number),c(w,u),c(pa,t(d).subject||"-"),c(ma,_)},[()=>aa(t(d).doc_type),()=>$(t(d).doc_date)]),i(A,f)}),a(o),a(v),i(r,v)};y(oa,r=>{t(B).length===0?r(ua):r(ha,!1)})}a(R);var ga=l(R,2);{var _a=r=>{var v=Pa(),o=l(e(v),2),A=e(o),d=e(A);let f;var b=l(d,2),x=l(e(b),2),T=e(x,!0);a(x),a(b),a(A);var D=l(A,2),K=e(D);let w;z(2),a(D),a(o),a(v),S(()=>{f=X(d,1,"service-status svelte-1uha8ag",null,f,{online:t(h).ollama.available}),c(T,t(h).ollama.model),w=X(K,1,"service-status svelte-1uha8ag",null,w,{online:t(h).paperless.available})}),i(r,v)};y(ga,r=>{t(h)&&r(_a)})}S(()=>{c(la,t(B).length),c(ia,t(J))}),i(p,m)};y(F,p=>{t(C)?p(ra):p(va,!1)},!0)}i(s,g)};y(ea,s=>{t(O)?s(ta):s(sa,!1)})}a(E),i(Y,E),Na()}export{$a as component};
